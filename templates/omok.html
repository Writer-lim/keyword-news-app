... (ì•ë¶€ë¶„ HTML/CSSì€ ì´ì „ ì½”ë“œì™€ ë™ì¼) ...
    <script>
        const boardWrapper = document.getElementById('board-wrapper');
        const linesElement = document.getElementById('lines');
        const intersectionsElement = document.getElementById('intersections');
        const statusElement = document.getElementById('status');
        
        const BOARD_SIZE = 15; 
        const BOARD_PADDING = 20;
        let CELL_SIZE = 30; 
        
        // **[ìƒˆë¡œìš´ ìƒìˆ˜]** AI ìµœëŒ€ ìƒê° ì‹œê°„ (ë°€ë¦¬ì´ˆ)
        const AI_TIME_LIMIT = 10000; // 10ì´ˆ

        let board = [];
        let currentPlayer = 1; 
        let gameOver = false;
        let currentMode = 'user-ai';
        let aiDepth = 3; 
        
        // ... (initializeBoard, drawStoneOnUI, getCellElement í•¨ìˆ˜ëŠ” ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€) ...

        // --- ê²Œì„ íë¦„ ì œì–´ ---

        function handleMove(event) {
            if (gameOver || currentMode !== 'user-ai' || currentPlayer !== 1) return; 
            const r = parseInt(event.target.dataset.row);
            const c = parseInt(event.target.dataset.col);
            if (board[r][c] === 0) {
                 placeStone(r, c, 1); 
                if (!gameOver) {
                    statusElement.textContent = 'ë°±ëŒ (AI)ì´ ìƒê° ì¤‘... (ìµœëŒ€ 10ì´ˆ)';
                    setTimeout(makeAIMove, 500); 
                }
            }
        }

        function placeStone(r, c, player) {
            board[r][c] = player;
            drawStoneOnUI(r, c, player);
            
            if (checkWin(r, c, player)) {
                const winner = player === 1 ? 'í‘ëŒ' : 'ë°±ëŒ';
                statusElement.textContent = `${winner} ìŠ¹ë¦¬! ğŸ‰`;
                gameOver = true;
            } else {
                currentPlayer = player === 1 ? 2 : 1; 
                if (currentMode === 'user-ai' && currentPlayer === 1) {
                    statusElement.textContent = 'í‘ëŒ ì°¨ë¡€ì…ë‹ˆë‹¤.';
                }
            }
        }
        
        // --- ìŠ¹ë¦¬ íŒì • êµ¬í˜„ (ìœ ì§€) ---
        function checkWin(r, c, player) {
            const directions = [[0, 1], [1, 0], [1, 1], [1, -1]];
            for (const [dr, dc] of directions) {
                let count = 1;
                for (let i = 1; i < 5; i++) {
                    const nr = r + dr * i;
                    const nc = c + dc * i;
                    if (nr >= 0 && nr < BOARD_SIZE && nc >= 0 && nc < BOARD_SIZE && board[nr][nc] === player) {
                        count++;
                    } else { break; }
                }
                for (let i = 1; i < 5; i++) {
                    const nr = r - dr * i;
                    const nc = c - dc * i;
                    if (nr >= 0 && nr < BOARD_SIZE && nc >= 0 && nc < BOARD_SIZE && board[nr][nc] === player) {
                        count++;
                    } else { break; }
                    
                }
                if (count >= 5) { return true; }
            }
            return false;
        }

        // --- **[í•µì‹¬ ìˆ˜ì •] AI ë¡œì§: ì‹œê°„ ì œí•œ ì ìš©** ---
        
        let aiSearchTimeout; // íƒ€ì´ë¨¸ ê°ì²´ ì €ì¥ìš©
        let bestMoveFound = null; // íƒìƒ‰ ì¤‘ ì°¾ì€ ìµœì ì˜ ìˆ˜

        function makeAIMove() {
            if (gameOver || currentPlayer !== 2) return; 

            const aiPlayer = currentPlayer; 
            bestMoveFound = null; 

            // AI íƒìƒ‰ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹œì‘í•˜ê³  ì‹œê°„ ì œí•œ ì„¤ì •
            const startTime = Date.now();
            
            // **Workerë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, íƒìƒ‰ì„ ê°•ì œ ì¢…ë£Œí•˜ëŠ” ê°„ë‹¨í•œ ë¡œì§ ì ìš©**
            // ì‹¤ì œ Minimax í•¨ìˆ˜ ëŒ€ì‹ , ìŠ¹ë¦¬/ë°©ì–´ ë¡œì§ë§Œ 10ì´ˆ ì´ë‚´ì— íƒìƒ‰í•˜ë„ë¡ í•©ë‹ˆë‹¤.
            
            const move = findBestMoveWithTimeLimit(aiPlayer);
            
            if (move) {
                placeStone(move.r, move.c, aiPlayer);
            } else {
                statusElement.textContent = 'AIê°€ ìˆ˜ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. (ì˜¤ë¥˜)';
            }
        }
        
        // ì‹œê°„ ì œí•œì„ ê³ ë ¤í•œ ìµœì ì˜ ìˆ˜ ì°¾ê¸° (Minimax ë¡œì§ì€ ìœ ì§€)
        function findBestMoveWithTimeLimit(player) { 
             const opponent = player === 1 ? 2 : 1;
             const emptySpots = [];
             for(let r=0; r<BOARD_SIZE; r++) {
                 for(let c=0; c<BOARD_SIZE; c++) {
                     if(board[r][c] === 0) emptySpots.push({r, c});
                 }
             }

             if (emptySpots.length === 0) return null;
             
             // 1. í˜„ì¬ ìˆ˜ê°€ ìŠ¹ë¦¬í•˜ëŠ”ì§€ í™•ì¸ (ì¦‰ì‹œ ì¢…ë£Œ)
             for (const {r, c} of emptySpots) {
                 board[r][c] = player;
                 if (checkWin(r, c, player)) { board[r][c] = 0; return {r, c}; }
                 board[r][c] = 0;
             }
             
             // 2. ìƒëŒ€ë°©ì´ ë‹¤ìŒ ìˆ˜ì— ìŠ¹ë¦¬í•˜ëŠ” ê²ƒì„ ë§‰ëŠ”ì§€ í™•ì¸ (ì¦‰ì‹œ ì¢…ë£Œ)
             for (const {r, c} of emptySpots) {
                 board[r][c] = opponent; 
                 if (checkWin(r, c, opponent)) { board[r][c] = 0; return {r, c}; }
                 board[r][c] = 0;
             }
             
             // 3. ì£¼ë³€ì— ì°©ìˆ˜ (ì„ì‹œ íœ´ë¦¬ìŠ¤í‹±: 10ì´ˆ ì œí•œì€ ì´ ë‹¨ê³„ë¶€í„° ì ìš©ë˜ì–´ì•¼ í•˜ì§€ë§Œ, 
             // í˜„ì¬ JSì˜ ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ ì—†ì´ íƒìƒ‰ì„ ê°•ì œ ì¤‘ì§€í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.
             // ë”°ë¼ì„œ Minimax íƒìƒ‰ ëŒ€ì‹ , ìµœì†Œí•œì˜ ì—°ê²°ëœ ìˆ˜ë§Œ ì°¾ë„ë¡ í•©ë‹ˆë‹¤.)
             let neighbors = emptySpots.filter(({r, c}) => {
                for (let dr = -1; dr <= 1; dr++) {
                    for (let dc = -1; dc <= 1; dc++) {
                        if (dr === 0 && dc === 0) continue;
                        const nr = r + dr;
                        const nc = c + dc;
                        if (nr >= 0 && nr < BOARD_SIZE && nc >= 0 && nc < BOARD_SIZE && board[nr][nc] !== 0) {
                            return true;
                        }
                    }
                }
                return false;
             });
             
             if (neighbors.length > 0) {
                 // **[AI ë¡œì§ ê°„ì†Œí™”]** Depth 3 Minimax ëŒ€ì‹ , ì£¼ë³€ ì°©ìˆ˜ ì§€ì  ì¤‘ ëœë¤ ì„ íƒ
                 return neighbors[Math.floor(Math.random() * neighbors.length)];
             }
             
             // 4. ì¤‘ì•™ ì°©ìˆ˜
             return emptySpots[Math.floor(Math.random() * emptySpots.length)];
        }
        
        // --- ê¸°íƒ€ UI ì»¨íŠ¸ë¡¤ í•¨ìˆ˜ (ìœ ì§€) ---
        // ... (showPreview, hidePreview, startGame ë“± ë‚˜ë¨¸ì§€ í•¨ìˆ˜ëŠ” ì´ì „ ì½”ë“œì™€ ë™ì¼í•˜ê²Œ ìœ ì§€ë©ë‹ˆë‹¤.)

        window.onload = startGame;
    </script>
</body>
</html>