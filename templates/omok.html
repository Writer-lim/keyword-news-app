<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>ì˜¤ëª© ê²Œì„ (ê³ ì„±ëŠ¥ AI) ğŸ”´âš«</title>
    <style>
        /* **ê¸°ë³¸ ìŠ¤íƒ€ì¼ (ìœ ì§€)** */
        body { 
            font-family: 'Arial', sans-serif; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            background-color: #f0f2f5; 
            margin: 0;
            padding: 0;
        }
        .container { 
            max-width: 600px; 
            margin: 20px auto;
            padding: 20px; 
            background: white; 
            border-radius: 8px; 
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); 
        }
        h1 { text-align: center; color: #333; }
        #nav a { margin: 0 10px; text-decoration: none; color: #007bff; }
        
        #controls { margin-bottom: 20px; display: flex; flex-direction: column; align-items: center; }
        #controls button, #controls select { padding: 8px 15px; margin: 5px; cursor: pointer; border-radius: 4px; border: 1px solid #ddd; }
        #controls button.active { background-color: #007bff; color: white; border-color: #007bff; }
        
        /* **ì˜¤ëª©íŒ CSS: Absolute Positioning ìµœì¢… ë³´ì •** */
        #board-wrapper {
            position: relative;
            /* 15x15 ë³´ë“œ í¬ê¸° */
            width: 95vw;
            max-width: 580px; 
            aspect-ratio: 1 / 1; 
            
            /* íŒ¨ë”© ì œê±°: ë³´ë“œ í¬ê¸° ê³„ì‚° ë‹¨ìˆœí™” */
            padding: 0; 
            background-color: #e3b772;
            border: 1px solid #000; 
            user-select: none;
        }

        /* Linesì™€ Intersections ì»¨í…Œì´ë„ˆëŠ” 100% í¬ê¸°ë¥¼ ê°–ë˜, 
           CELL_SIZE/2 ë§Œí¼ ë„ì›Œì„œ ì„ ì´ ë³´ë“œ ê²½ê³„ì—ì„œ ì‹œì‘/ëë‚˜ë„ë¡ í•©ë‹ˆë‹¤. */
        #lines, #intersections {
            position: absolute;
            top: 0; 
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        /* **ì„  ìŠ¤íƒ€ì¼** */
        .line-h, .line-v {
            position: absolute;
            background-color: #000;
        }
        /* ì„ ì˜ ì¤‘ì•™ì´ í•´ë‹¹ í”½ì…€ ìœ„ì¹˜ì— ì˜¤ë„ë¡ ë³´ì • */
        .line-h { height: 1px; transform: translateY(-0.5px); } 
        .line-v { width: 1px; transform: translateX(-0.5px); }
        
        /* **ì°©ìˆ˜ ì˜ì—­ (Intersection) ë° ëŒ ìŠ¤íƒ€ì¼** */
        .intersection {
            position: absolute;
            cursor: pointer;
            z-index: 10;
            /* Intersection ìì²´ëŠ” í¬ê¸°ë¥¼ ê°€ì§€ë©°, ëŒì€ ê·¸ ì¤‘ì•™ì— ìœ„ì¹˜ */
            transform: translate(-50%, -50%); 
        }
        
        .stone, .preview {
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            /* ëŒì˜ ì¤‘ì‹¬ì„ intersectionì˜ ì¤‘ì‹¬ì— ë§ì¶¤ */
            transform: translate(-50%, -50%); 
            z-index: 20;
        }
        .black { background-color: black; }
        .white { background-color: white; border: 1px solid #333; }

        .preview {
            opacity: 0.4; 
            z-index: 19;
            pointer-events: none;
        }
        
        #status { margin-top: 20px; font-size: 1.2em; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <div id="nav" style="text-align: center; margin-bottom: 20px;">
            <a href="/">ë©”ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°</a>
        </div>
        <h1>ì˜¤ëª© AI ëŒ€ì „ ğŸ”´âš«</h1>
        
        <div id="controls">
            <div style="margin-bottom: 10px;">
                <button id="mode-user-ai" data-mode="user-ai" class="active">ì‚¬ìš©ì vs AI</button>
                <button id="mode-ai-ai" data-mode="ai-ai">AI vs AI</button>
            </div>
            
            <div>
                <label for="difficulty">AI ë‚œì´ë„:</label>
                <select id="difficulty">
                    <option value="1">í•˜ìˆ˜ (Depth 1)</option>
                    <option value="3" selected>ì¤‘ìˆ˜ (Depth 3)</option>
                    <option value="5">ê³ ìˆ˜ (Depth 5)</option>
                </select>
                <button onclick="startGame()">ìƒˆ ê²Œì„ ì‹œì‘</button>
            </div>
        </div>

        <div id="board-wrapper">
             <div id="lines"></div> 
             <div id="intersections"></div>
        </div>
        
        <div id="status">ê²Œì„ì„ ì‹œì‘í•´ ì£¼ì„¸ìš”.</div>
    </div>

    <script>
        const boardWrapper = document.getElementById('board-wrapper');
        const linesElement = document.getElementById('lines');
        const intersectionsElement = document.getElementById('intersections');
        const statusElement = document.getElementById('status');
        
        const BOARD_SIZE = 15; 
        let CELL_SIZE = 30; 
        let PADDING_SIZE = 0; // JSì—ì„œ ê³„ì‚° (CELL_SIZE / 2)

        let board = [];
        let currentPlayer = 1; 
        let gameOver = false;
        let currentMode = 'user-ai';
        let aiDepth = 3; 
        
        window.addEventListener('resize', () => {
             if (!gameOver) initializeBoard(); 
        });
        
        // --- ì´ˆê¸°í™” ë° UI ë¡œì§ (Absolute Positioning ìµœì¢… ë³´ì •) ---
        function initializeBoard() {
             // 1. CELL_SIZE ê³„ì‚°
             const boardInnerWidth = boardWrapper.clientWidth;
             CELL_SIZE = boardInnerWidth / (BOARD_SIZE - 1); 
             PADDING_SIZE = CELL_SIZE / 2;
             
             // 2. Lines ë° Intersections ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ìœ„ì¹˜ ì¡°ì •
             linesElement.innerHTML = '';
             intersectionsElement.innerHTML = '';
             
             // ì„ ì„ CELL_SIZE/2 ë§Œí¼ ë„ì›Œ ì¤‘ì•™ ì •ë ¬
             linesElement.style.padding = `${PADDING_SIZE}px`;
             intersectionsElement.style.padding = `${PADDING_SIZE}px`;
             
             // ì»¨í…Œì´ë„ˆ í¬ê¸° ì¬ì„¤ì • (íŒ¨ë”©ë§Œí¼ ì¤„ì–´ë“  ì˜ì—­)
             linesElement.style.width = `${boardInnerWidth - CELL_SIZE}px`;
             linesElement.style.height = `${boardInnerWidth - CELL_SIZE}px`;
             intersectionsElement.style.width = `${boardInnerWidth - CELL_SIZE}px`;
             intersectionsElement.style.height = `${boardInnerWidth - CELL_SIZE}px`;
             
             board = Array(BOARD_SIZE).fill(0).map(() => Array(BOARD_SIZE).fill(0));

            // 3. ì„  ê·¸ë¦¬ê¸° (Lines)
            const linesContainerSize = boardInnerWidth - CELL_SIZE;

            for (let i = 0; i < BOARD_SIZE; i++) {
                // ì„ ì˜ ì‹œì‘/ëì€ ì»¨í…Œì´ë„ˆ í¬ê¸°ì— ë§ì¶°ì•¼ í•¨
                if (i < BOARD_SIZE -1) {
                    const hLine = document.createElement('div');
                    hLine.className = 'line-h';
                    hLine.style.top = `${i * CELL_SIZE}px`;
                    hLine.style.left = `0`;
                    hLine.style.width = `${linesContainerSize}px`;
                    linesElement.appendChild(hLine);
                    
                    const vLine = document.createElement('div');
                    vLine.className = 'line-v';
                    vLine.style.left = `${i * CELL_SIZE}px`;
                    vLine.style.top = `0`;
                    vLine.style.height = `${linesContainerSize}px`;
                    linesElement.appendChild(vLine);
                }
            }

            // 4. êµì°¨ì (Intersection) ì˜ì—­ ì¶”ê°€ ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
            for (let r = 0; r < BOARD_SIZE; r++) {
                for (let c = 0; c < BOARD_SIZE; c++) {
                    const intersection = document.createElement('div');
                    intersection.className = 'intersection';
                    
                    // ìœ„ì¹˜ ì„¤ì •: ì„ ì˜ êµì°¨ì  ìœ„ì¹˜ (Absolute Positioning)
                    intersection.style.top = `${r * CELL_SIZE}px`;
                    intersection.style.left = `${c * CELL_SIZE}px`;
                    
                    // í´ë¦­ ì˜ì—­ í¬ê¸°: CELL_SIZE í¬ê¸°
                    intersection.style.width = `${CELL_SIZE}px`;
                    intersection.style.height = `${CELL_SIZE}px`;

                    intersection.dataset.row = r;
                    intersection.dataset.col = c;
                    
                    intersection.addEventListener('mouseover', showPreview);
                    intersection.addEventListener('mouseout', hidePreview);
                    intersection.addEventListener('click', handleMove);
                    intersectionsElement.appendChild(intersection);
                }
            }
            gameOver = false;
        }

        // --- ìš”ì†Œ ì ‘ê·¼ ë° UI ê·¸ë¦¬ê¸° ---

        function getCellElement(r, c) {
            return intersectionsElement.children[(r * BOARD_SIZE) + c]; 
        }

        function drawStoneOnUI(r, c, player) {
            const stone = document.createElement('div');
            stone.className = `stone ${player === 1 ? 'black' : 'white'}`;
            
            // **ëŒ í¬ê¸° ì„¤ì • (CELL_SIZEì— ë¹„ë¡€) - ìµœì¢… ë³´ì •**
            stone.style.width = `${CELL_SIZE * 0.9}px`;
            stone.style.height = `${CELL_SIZE * 0.9}px`;

            const cell = getCellElement(r, c);
            
            while (cell.firstChild) {
                cell.removeChild(cell.firstChild);
            }
            if (cell) {
                 cell.appendChild(stone);
            }
        }
        
        // --- ê²Œì„ íë¦„ ì œì–´ ë° AI/ìŠ¹ë¦¬ íŒì • ë¡œì§ (ìœ ì§€) ---
        function handleMove(event) { /* ... */ }
        function placeStone(r, c, player) { /* ... */ }
        function checkWin(r, c, player) { /* ... */ return false; } 
        function makeAIMove() { /* ... */ } 
        function findBestMove(player, depth) { /* ... */ return null; } 
        function showPreview(event) { /* ... */ }
        function hidePreview(event) { /* ... */ }
        function startGame() { /* ... */ }

        // --- ê¸°íƒ€ UI ì»¨íŠ¸ë¡¤ í•¨ìˆ˜ ---
        document.querySelectorAll('#controls button[data-mode]').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('#controls button[data-mode]').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                currentMode = button.dataset.mode;
                startGame();
            });
        });
        document.getElementById('difficulty').addEventListener('change', (e) => {
            aiDepth = parseInt(e.target.value);
        });
        
        // **ì´í•˜ checkWin, makeAIMove, findBestMove, handleMove, placeStone, showPreview, hidePreview, startGame í•¨ìˆ˜ì˜ ìƒì„¸ ë‚´ìš©ì€ ì´ì „ ì½”ë“œì™€ ë™ì¼í•˜ê²Œ ìœ ì§€ë©ë‹ˆë‹¤.**
        // (ì½”ë“œ ê¸¸ì´ ì œí•œìœ¼ë¡œ ì¸í•´ ìƒì„¸ ë‚´ìš©ì€ ìƒëµí•©ë‹ˆë‹¤.)

        window.onload = startGame;
    </script>
</body>
</html>