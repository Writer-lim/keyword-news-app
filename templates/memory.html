<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©”ëª¨ë¦¬ ê²Œì„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        /* ì¹´ë“œ ì»¨í…Œì´ë„ˆ */
        #game-board {
            display: grid;
            gap: 12px;
            /* 4x4 ê·¸ë¦¬ë“œ ê¸°ë³¸ ì„¤ì • */
            grid-template-columns: repeat(4, 1fr);
            padding: 20px;
            background-color: #334155; /* Slate-700 */
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        /* ì¹´ë“œ ìì²´ ìŠ¤íƒ€ì¼ */
        .card {
            width: 80px;
            height: 100px;
            perspective: 1000px; /* 3D íš¨ê³¼ë¥¼ ìœ„í•œ ì›ê·¼ê° ì„¤ì • */
            cursor: pointer;
        }

        /* ì¹´ë“œ ë‚´ë¶€ ì»¨í…Œì´ë„ˆ (íšŒì „ ëŒ€ìƒ) */
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
            border-radius: 8px;
        }

        /* ì¹´ë“œê°€ ë’¤ì§‘í˜”ì„ ë•Œ íšŒì „ */
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        /* ì¹´ë“œ ì•ë©´ (ìˆ¨ê¹€) */
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* ë’·ë©´ì´ ë³´ì´ì§€ ì•Šë„ë¡ ì„¤ì • */
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 2.5rem;
            font-weight: 700;
        }

        /* ì¹´ë“œ ë’·ë©´ (ìƒ‰ìƒ) */
        .card-back {
            background-color: #64748b; /* Slate-500 (ë®ì—¬ ìˆëŠ” ìƒíƒœ) */
            color: #ffffff;
            /* í…Œë‘ë¦¬ ìŠ¤íƒ€ì¼ */
            border: 4px solid #94a3b8; 
        }

        /* ì¹´ë“œ ì•ë©´ (ì•„ì´ì½˜) */
        .card-front {
            background-color: #f1f5f9; /* Slate-100 (ì—´ë¦° ìƒíƒœ) */
            color: #334155;
            transform: rotateY(180deg);
            border: 4px solid #64748b; 
        }

        /* ì§ ë§ì¶˜ ì¹´ë“œ */
        .card.matched {
            pointer-events: none; /* í´ë¦­ ë¹„í™œì„±í™” */
            opacity: 0.6;
        }
        
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <div class="bg-white p-6 rounded-xl shadow-2xl flex flex-col items-center gap-6 w-full max-w-lg">
        
        <h1 class="text-3xl font-bold text-center mb-2 text-gray-800 flex items-center">
            <i class="fas fa-brain text-purple-600 mr-3"></i> ë©”ëª¨ë¦¬ ê²Œì„
        </h1>

        <div class="text-xl font-semibold mb-4 w-full flex justify-around">
            <div id="flips-display" class="text-blue-600">
                <i class="fas fa-sync-alt mr-2"></i> ì‹œë„: 0
            </div>
            <div id="matches-display" class="text-green-600">
                <i class="fas fa-check-double mr-2"></i> ì§: 0 / 8
            </div>
        </div>

        <div id="game-board">
            </div>

        <div class="w-full text-center mt-4">
            <p id="game-message" class="text-lg font-bold text-red-500 mb-4 hidden">ê²Œì„ ìŠ¹ë¦¬!</p>
            <button id="start-button" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg shadow-lg transition-transform transform hover:scale-[1.02] active:scale-95">
                ê²Œì„ ì‹œì‘ (4x4)
            </button>
        </div>
    </div>

    <a href="/" class="block mt-4 text-center text-indigo-500 hover:text-indigo-700 font-medium">
        â† ë©”ì¸ ê²€ìƒ‰ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
    </a>

    <script>
        // --- ê²Œì„ ì„¤ì • ---
        const EMOJIS = ['ğŸš€', 'ğŸŒŸ', 'ğŸ’¡', 'ğŸ’–', 'ğŸ”¥', 'ğŸ‰', 'ğŸŒˆ', 'ğŸ¦']; // 8ìŒì˜ ì•„ì´ì½˜
        const BOARD_SIZE = 4; // 4x4 ë³´ë“œ

        // --- DOM ìš”ì†Œ ---
        const gameBoard = document.getElementById('game-board');
        const flipsDisplay = document.getElementById('flips-display');
        const matchesDisplay = document.getElementById('matches-display');
        const startButton = document.getElementById('start-button');
        const gameMessage = document.getElementById('game-message');

        // --- ê²Œì„ ìƒíƒœ ë³€ìˆ˜ ---
        let cards = []; // ì¹´ë“œ ë°°ì—´ (ì•„ì´ì½˜, ID, ë§¤ì¹­ ìƒíƒœ í¬í•¨)
        let flippedCards = []; // í˜„ì¬ ë’¤ì§‘íŒ ì¹´ë“œ
        let busy = false; // ì¹´ë“œ ë¹„êµ ì¤‘ í´ë¦­ ë°©ì§€ í”Œë˜ê·¸
        let flips = 0;
        let matches = 0;
        let totalMatches = EMOJIS.length;

        // --- ì´ˆê¸°í™” ---

        function initializeGame() {
            flips = 0;
            matches = 0;
            busy = false;
            flippedCards = [];
            gameMessage.classList.add('hidden');
            startButton.textContent = 'ê²Œì„ ì¬ì‹œì‘';
            
            flipsDisplay.innerHTML = `<i class="fas fa-sync-alt mr-2"></i> ì‹œë„: 0`;
            matchesDisplay.innerHTML = `<i class="fas fa-check-double mr-2"></i> ì§: 0 / ${totalMatches}`;
            
            generateCards();
            renderBoard();
        }

        // ì¹´ë“œ ìŒ ìƒì„± ë° ë¬´ì‘ìœ„ ì„ê¸°
        function generateCards() {
            cards = [];
            let cardId = 0;
            
            // 8ê°œì˜ ì´ëª¨ì§€ ìŒ ìƒì„±
            EMOJIS.forEach(emoji => {
                cards.push({ id: cardId++, value: emoji, matched: false });
                cards.push({ id: cardId++, value: emoji, matched: false });
            });

            // Fisher-Yates ì…”í”Œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì¹´ë“œ ì„ê¸°
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cards[i], cards[j]] = [cards[j], cards[i]];
            }
        }

        // --- ë Œë”ë§ ---

        function renderBoard() {
            gameBoard.innerHTML = '';
            gameBoard.style.gridTemplateColumns = `repeat(${BOARD_SIZE}, 1fr)`;
            
            cards.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.classList.add('card');
                cardElement.dataset.id = card.id;
                cardElement.dataset.value = card.value;
                
                // ì´ë¯¸ ë§ì¶˜ ì¹´ë“œë¼ë©´ 'flipped' ë° 'matched' í´ë˜ìŠ¤ ì¶”ê°€
                if (card.matched) {
                    cardElement.classList.add('flipped', 'matched');
                }

                cardElement.innerHTML = `
                    <div class="card-inner">
                        <div class="card-face card-back">?</div>
                        <div class="card-face card-front">${card.value}</div>
                    </div>
                `;
                
                // ì´ë¯¸ ë§ì¶˜ ì¹´ë“œê°€ ì•„ë‹ˆë¼ë©´ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                if (!card.matched) {
                    cardElement.addEventListener('click', () => handleCardClick(cardElement, card));
                }

                gameBoard.appendChild(cardElement);
            });
        }

        // --- ê²Œì„ ë¡œì§ ---

        function handleCardClick(element, cardData) {
            // ê²Œì„ ì¤‘ì´ ì•„ë‹ˆê±°ë‚˜, ì´ë¯¸ ë’¤ì§‘í˜”ê±°ë‚˜, ë¹„êµ ì¤‘ì¼ ë•Œ í´ë¦­ ë¬´ì‹œ
            if (busy || element.classList.contains('flipped')) {
                return;
            }

            // 1. ì¹´ë“œ ë’¤ì§‘ê¸°
            element.classList.add('flipped');
            flippedCards.push({ element, cardData });

            // 2. ì¹´ë“œ ì¹´ìš´íŠ¸ í™•ì¸
            if (flippedCards.length === 2) {
                busy = true; // ì¶”ê°€ í´ë¦­ ë°©ì§€
                flips++;
                flipsDisplay.innerHTML = `<i class="fas fa-sync-alt mr-2"></i> ì‹œë„: ${flips}`;
                
                checkForMatch();
            }
        }

        function checkForMatch() {
            const [card1, card2] = flippedCards;

            if (card1.cardData.value === card2.cardData.value) {
                // ì§ ë§ì¶¤ ì„±ê³µ!
                
                matches++;
                matchesDisplay.innerHTML = `<i class="fas fa-check-double mr-2"></i> ì§: ${matches} / ${totalMatches}`;
                
                // ì¹´ë“œë¥¼ 'matched' ìƒíƒœë¡œ ê³ ì •
                card1.element.classList.add('matched');
                card2.element.classList.add('matched');
                
                // í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±° (ë” ì´ìƒ ê±´ë“œë¦´ í•„ìš” ì—†ìŒ)
                card1.element.removeEventListener('click', handleCardClick);
                card2.element.removeEventListener('click', handleCardClick);
                
                flippedCards = []; // ë‹¤ìŒ ì‹œë„ë¥¼ ìœ„í•´ ì´ˆê¸°í™”
                busy = false;

                // ê²Œì„ ìŠ¹ë¦¬ í™•ì¸
                if (matches === totalMatches) {
                    winGame();
                }

            } else {
                // ì§ ë§ì¶¤ ì‹¤íŒ¨
                
                // 1ì´ˆ í›„ ì¹´ë“œë¥¼ ë‹¤ì‹œ ë’¤ì§‘ìŒ
                setTimeout(() => {
                    card1.element.classList.remove('flipped');
                    card2.element.classList.remove('flipped');
                    
                    flippedCards = [];
                    busy = false;
                }, 1000);
            }
        }

        function winGame() {
            gameMessage.textContent = 'ì¶•í•˜í•©ë‹ˆë‹¤! ëª¨ë“  ì§ì„ ë§ì·„ìŠµë‹ˆë‹¤!';
            gameMessage.classList.remove('hidden');
            gameMessage.classList.add('text-green-600');
            startButton.textContent = 'ë‹¤ì‹œ í”Œë ˆì´';
            startButton.focus();
        }

        // --- ì´ë²¤íŠ¸ ì—°ê²° ---
        startButton.addEventListener('click', initializeGame);

        // ì´ˆê¸° í™”ë©´ ì„¤ì • (ì²« ë¡œë“œ ì‹œ)
        initializeGame();

    </script>
</body>
</html>